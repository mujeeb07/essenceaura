<link rel="stylesheet" href="/user_asset/css/main.css?v=3.4">
<main class="main center" style="min-height: calc(100vh - 100px); display: flex; flex-direction: column;">
    <section class="py-5 flex-grow-1 d-flex align-items-center">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6 col-md-8">
                    <div class="login_wrap widget-taber-content p-30 background-white border-radius-10">
                        <div class="padding_eight_all bg-white">
                            <div class="heading_s1">
                                <h3 class="mb-30">Reset Password</h3>
                            </div>
                            <form id="resetPasswordForm" method="post" action="/reset_password"> 
                                <input type="hidden" name="token" value="<%= token %>">

                                <div class="form-group">
                                    <input type="password" id="password" name="password" placeholder="Password">
                                    <small id="passwordError" class="text-danger"></small>
                                </div>

                                <div class="form-group">
                                    <input type="password" id="cpassword" name="cpassword" placeholder="Confirm password">
                                    <small id="cpasswordError" class="text-danger"></small>
                                </div>

                                <div class="form-group">
                                    <button type="submit" class="btn mx-auto d-block hover-up" name="submit">Submit</button>
                                </div>
                            </form>

                            <div class="text-muted text-center">Already have an account? <a href="/login">Back to Login?</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.getElementById('resetPasswordForm').addEventListener('submit', function(event) {
        const password = document.getElementById('password').value.trim();
        const cpassword = document.getElementById('cpassword').value.trim();

        const passwordError = document.getElementById('passwordError');
        const cpasswordError = document.getElementById('cpasswordError');

        passwordError.textContent = '';
        cpasswordError.textContent = '';

        let isValid = true;

        if(password.length < 6 || cpassword.length < 6){
            passwordError.textContent = 'Password cannot be less than 6 characters';
            isValid = false;
        }

        if (password === '') {
            passwordError.textContent = 'Password cannot be empty';
            isValid = false;
        }

        if (cpassword === '') {
            cpasswordError.textContent = 'Confirm password cannot be empty';
            isValid = false;
        }

        if (password !== '' && cpassword !== '' && password !== cpassword) {
            cpasswordError.textContent = 'Passwords do not match';
            isValid = false;
        }

        if (!isValid) {
            event.preventDefault();
        }
    });



</script>
