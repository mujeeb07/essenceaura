<%- include('../layouts/admin/header.ejs') %>

    <section class="content-main mt-80 mb-80">
        <div class="card mx-auto card-login">
            <div class="card-body">
                <h4 class="card-title mb-4 text-center">Admin Sign in</h4>
                <form id="admin-login-form" method="post" action="/admin">
                    <!-- <% if (message) { %>
                        <p class="mb-3 alert alert-danger"><%= message %></p>
                    <% } %> -->

                    <div class="mb-3">
                        <input class="form-control" id="email" name="email" placeholder="Email" type="text">
                    </div> 
                    <div class="mb-3">
                        <input class="form-control" id="password" name="password" placeholder="Password" type="password">
                    </div> 
                    
                    <div class="mb-4">
                        <button type="submit" id="login-btn" class="btn btn-primary w-100"> Login </button>
                    </div> 
                </form>
            </div>
        </div>
    </section>

    <%- include('../layouts/admin/footer.ejs') %>




<script>
    const message = '<%= message %>'
        console.log("Error message:", message)
        if(message !== ''){
            Swal.fire({
                icon: 'error',
                text: `${message}`,
                toast: true,
                position: 'top-right',
                showConfirmButton: false,
                timerProgressBar: true,
                timer: 3000
            });
        }
    document.getElementById('admin-login-form').addEventListener('submit', function (e) {
        e.preventDefault();

        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value.trim();

        if (!email || !password) {
            Swal.fire({
                icon: 'error',
                text: 'Enter email and password to login.',
                toast: true,
                position: 'top-right',
                showConfirmButton: false,
                timerProgressBar: true,
                timer: 3000
            });
            return;
        }

        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(email)) {
            Swal.fire({
                icon: 'error',
                title: 'Invalid Email',
                text: 'Please enter a valid email address.',
                toast: true,
                position: 'top-right',
                showConfirmButton: false,
                timerProgressBar: true,
                timer: 3000
            });
            return;
        }

        this.submit();
    });
</script>
